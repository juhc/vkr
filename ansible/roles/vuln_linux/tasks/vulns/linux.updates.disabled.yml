- name: Disable unattended-upgrades (best-effort)
  ansible.builtin.service:
    name: unattended-upgrades
    state: stopped
    enabled: false
  when: ansible_os_family == "Debian"
  failed_when: false

- name: Disable apt timers (best-effort)
  ansible.builtin.service:
    name: "{{ item }}"
    state: stopped
    enabled: false
  loop:
    - apt-daily.timer
    - apt-daily-upgrade.timer
  when: ansible_os_family == "Debian"
  failed_when: false

- name: Disable dnf-automatic timer (RHEL-family, best-effort)
  ansible.builtin.service:
    name: dnf-automatic.timer
    state: stopped
    enabled: false
  when: ansible_os_family == "RedHat"
  failed_when: false

- name: Disable yum-cron service (RHEL-family, best-effort)
  ansible.builtin.service:
    name: yum-cron
    state: stopped
    enabled: false
  when: ansible_os_family == "RedHat"
  failed_when: false

