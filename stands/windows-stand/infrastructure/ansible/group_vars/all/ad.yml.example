---
# Active Directory (обязательный компонент обучения).
#
# Как использовать:
# 1) Скопируйте в ad.yml (и храните пароль через Ansible Vault):
#      cp group_vars/all/ad.yml.example group_vars/all/ad.yml
#      ansible-vault encrypt group_vars/all/ad.yml
#
# 2) Заполните значения под вашу сеть/домен.

# Включать ли присоединение к домену для конкретных групп (ВМ).
# Если false — роль ad_join будет пропущена, и креды join не требуются.
ad_join_profiles:
  windows_workstation: true
  windows_server: true
  domain_controller: false

# Организационная часть: OU/GPO scope для конкретного стенда
ad_org_enabled: true
ad_training_ou: "Training"
ad_stand_id: "stand-win-01"
ad_stand_ou: "Stand-Win-01"

# IMPORTANT: Это именно COMPUTERNAME в домене (как видит AD), а не alias из inventory.
# Часто совпадает с hostname/именем ВМ, но проверьте на своих шаблонах.
ad_stand_computers:
  - "windows-10-training"
  - "windows-server-training"

# FQDN домена AD (DNS-имя)
ad_domain_name: "training.local"

# IP Domain Controller (DNS-сервер домена)
ad_dc_ip: "192.168.101.30"

# Учётка для присоединения машин к домену (должна иметь право join)
# Рекомендуется доменная: "Administrator@training.local" или отдельный join-аккаунт.
ad_join_user: "Administrator@training.local"

# Пароль join-аккаунта (vault!)
ad_join_password: "PUT-AD-JOIN-PASSWORD-HERE"

# Настройка DNS на машинах перед join (важно для корректного поиска SRV записей домена)
ad_configure_dns: true

# Префикс для учебных GPO, создаваемых уязвимостями ad.gpo.*
# Должен совпадать с тем, что использует роль ad_org для линковки/фильтрации.
ad_gpo_prefix: "training-ad.gpo."

# Дополнительно: доменные объекты (опционально, если выполняется на DC)
ad_training_ou: "Training"
ad_training_users:
  - name: "student1"
    password: "StudentPass123!"
  - name: "student2"
    password: "StudentPass123!"
