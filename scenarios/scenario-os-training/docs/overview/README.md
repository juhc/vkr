# Сценарий обучения защите операционных систем

## Описание

Данный сценарий предназначен для практического обучения навыкам защиты операционных систем. Инфраструктура включает три виртуальные машины с различными операционными системами, настроенными с типичными уязвимостями ОС.

**⚠️ Важно**: Все три машины находятся в одной сети (192.168.100.0/24) и настроены с заложенными уязвимостями и неправильными конфигурациями для обучения.

## Сетевая топология

```
┌─────────────────────────────────────────────────────────┐
│         Учебная сеть: 192.168.100.0/24                  │
│                                                         │
│  ┌──────────────────┐  ┌──────────────────┐            │
│  │ Ubuntu Server    │  │ Windows Server   │            │
│  │ 192.168.100.10   │  │ 2016             │            │
│  │                  │  │ 192.168.100.20   │            │
│  │ Linux уязвимости │  │ Windows уязвимости│            │
│  └──────────────────┘  └──────────────────┘            │
│                                                         │
│  ┌──────────────────┐                                   │
│  │ Windows 10 Pro   │                                   │
│  │ 192.168.100.30   │                                   │
│  │                  │                                   │
│  │ Клиентские       │                                   │
│  │ уязвимости       │                                   │
│  └──────────────────┘                                   │
│                                                         │
│  Шлюз: 192.168.100.1                                   │
│  DNS: 8.8.8.8, 8.8.4.4                                 │
└─────────────────────────────────────────────────────────┘
```

Все машины должны быть в одной сети для:
- Взаимодействия между системами
- Демонстрации сетевых уязвимостей
- Проведения комплексных атак
- Обучения сетевым техникам безопасности

## Состав инфраструктуры

### 1. Ubuntu Server (192.168.100.10)
- **ОС**: Ubuntu 20.04 LTS Server
- **Назначение**: Демонстрация уязвимостей Linux ОС
- **Уязвимости ОС**:
  - Слабые пароли пользователей
  - Разрешен root login по SSH
  - Парольная аутентификация SSH
  - Отключены автоматические обновления безопасности
  - Неправильные права доступа к файлам (777)
  - Хранение учетных данных в открытом виде
  - SMBv1 включен

### 2. Windows Server 2016 (192.168.100.20)
- **ОС**: Windows Server 2016
- **Назначение**: Демонстрация уязвимостей Windows Server
- **Уязвимости ОС** (10 категорий):
  1. **Аутентификация и управление учётными записями**: слабые пароли, использование Domain Admin для обычных задач, нет MFA
  2. **Ошибки в настройке политик безопасности (GPO)**: PowerShell Remoting без ограничений, пароли в GPP, отключён аудит
  3. **Ошибки в управлении правами**: широкие права на AD-объекты, чрезмерное использование привилегированных групп, Unconstrained Delegation
  4. **Уязвимости из-за неправильной конфигурации сети**: ошибки DNS, широкие правила брандмауэра, SMBv1, NTLMv1, LDAP без TLS
  5. **Ошибки при настройке контроллеров домена**: DC используются как обычные сервера, небезопасная репликация
  6. **Ошибки в работе с обновлениями и антивирусом**: нет WSUS/SCCM, неправильная настройка антивируса
  7. **Уязвимости логирования, мониторинга и аудита**: минимальное логирование, нет мониторинга аномалий
  8. **Ошибки в резервном копировании**: бэкапы в домене и не защищены, нет бэкапов критичных объектов
  9. **Ошибки при работе с сервисными аккаунтами**: сервисные аккаунты с привилегиями Domain Admin, пароли не меняются годами
  10. **Устаревшие и небезопасные технологии**: NTLM вместо Kerberos, FRS вместо DFSR, открытые SMB без подписывания

### 3. Windows 10 Pro (192.168.100.30)
- **ОС**: Windows 10 Pro
- **Назначение**: Демонстрация уязвимостей рабочих станций Windows
- **Уязвимости ОС**:
  - Слабые пароли пользователей
  - Отключен UAC (User Account Control)
  - Отключены автоматические обновления
  - Отключен Windows Defender
  - SMBv1 включен
  - Неправильные права доступа к файлам
  - Отключен брандмауэр Windows
  - RDP включен

## Категории уязвимостей ОС

### 1. Аутентификация и авторизация
- Слабые пароли пользователей
- Разрешен root login по SSH (Linux)
- Парольная аутентификация вместо ключей
- Отключена политика сложности паролей (Windows)
- Отключен UAC (Windows)

### 2. Управление обновлениями
- Отключены автоматические обновления безопасности
- Устаревшие версии ОС и компонентов

### 3. Управление учетными записями
- Пароли никогда не истекают
- Избыточные привилегии пользователей
- Учетные записи по умолчанию не изменены

### 4. Файловая система и права доступа
- Неправильные права доступа к файлам (777, FullControl для Everyone)
- Хранение учетных данных в открытом виде
- Чувствительные данные доступны всем пользователям

### 5. Встроенные уязвимости ОС
- SMBv1 включен (уязвим к EternalBlue)
- Отключен брандмауэр
- Отключен антивирус/защита
- RDP включен без ограничений

## Детальная документация

Для подробного изучения уязвимостей см.:
- **[machine-scenarios.md](machine-scenarios.md)** - Общее описание сценариев
- **[machine-scenarios.md](machine-scenarios.md)** - Полное описание всех 12 категорий уязвимостей Ubuntu и 10 категорий уязвимостей Windows

## Задания для студентов

### Задание 1: Обнаружение уязвимостей аутентификации
- Найдите слабые пароли на всех машинах
- Обнаружьте разрешенный root login на Ubuntu
- Проверьте политику паролей на Windows

### Задание 2: Проверка управления обновлениями
- Проверьте статус автоматических обновлений
- Найдите устаревшие версии компонентов ОС
- Определите отсутствующие патчи безопасности

### Задание 3: Аудит прав доступа
- Найдите файлы с неправильными правами доступа
- Обнаружьте учетные данные в открытом виде
- Проверьте права доступа к чувствительным директориям

### Задание 4: Обнаружение встроенных уязвимостей
- Проверьте включен ли SMBv1
- Проверьте статус брандмауэра
- Проверьте статус антивируса/защиты

### Задание 5: Исправление уязвимостей
- Исправьте все обнаруженные уязвимости
- Настройте правильную политику паролей
- Включите автоматические обновления
- Исправьте права доступа к файлам
- Отключите уязвимые протоколы и сервисы

## Важные замечания

⚠️ **ВНИМАНИЕ**: Данная инфраструктура содержит намеренные уязвимости только для обучения!

- Используйте только в изолированной среде
- Не подключайте к производственным сетям
- Удаляйте после завершения обучения

## Навигация

- **[← Назад к документации](../README.md)** - индекс документации
- **[Развертывание](../deployment/QUICKSTART.md)** - руководство по развертыванию
- **[Обучение](../learning/objectives.md)** - цели обучения
- **[Оценка](../assessment/CHECKLIST.md)** - чек-листы и валидация

