# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

> üìö **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: –°–º. [../README.md](../README.md) –¥–ª—è –ø–æ–ª–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `scripts/test-deployment.sh`:

```bash
#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

set -e

echo "=== –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã ==="

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
GREEN='\033[0;32m'
RED='\033[0;31m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# –°—á–µ—Ç—á–∏–∫–∏
PASSED=0
FAILED=0

# –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏
check() {
    if [ $? -eq 0 ]; then
        echo -e "${GREEN}‚úì${NC} $1"
        PASSED=$((PASSED+1))
    else
        echo -e "${RED}‚úó${NC} $1"
        FAILED=$((FAILED+1))
    fi
}

# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ Terraform
echo ""
echo "1. –ü—Ä–æ–≤–µ—Ä–∫–∞ Terraform –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏..."
cd terraform
terraform init > /dev/null 2>&1 && check "Terraform –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω"
terraform validate > /dev/null 2>&1 && check "Terraform –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞"
terraform fmt -check > /dev/null 2>&1 && check "Terraform —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ"
cd ..

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ Ansible
echo ""
echo "2. –ü—Ä–æ–≤–µ—Ä–∫–∞ Ansible –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏..."
cd ansible
ansible-playbook --syntax-check -i inventory.yml playbook.yml > /dev/null 2>&1 && check "Ansible playbook —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω"
ansible-inventory -i inventory.yml --list > /dev/null 2>&1 && check "Ansible inventory –≤–∞–ª–∏–¥–µ–Ω"
cd ..

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Ubuntu Server (–µ—Å–ª–∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç)
echo ""
echo "3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Ubuntu Server..."
if ping -c 1 -W 2 192.168.100.10 > /dev/null 2>&1; then
    check "Ubuntu Server –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Å–µ—Ç–∏"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH
    if ssh -o StrictHostKeyChecking=no -o ConnectTimeout=5 ubuntu@192.168.100.10 "echo 'OK'" > /dev/null 2>&1; then
        check "SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Ubuntu Server —Ä–∞–±–æ—Ç–∞–µ—Ç"
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
        if ssh ubuntu@192.168.100.10 "test -f /root/VULNERABILITY_INFO.txt" > /dev/null 2>&1; then
            check "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π —Å–æ–∑–¥–∞–Ω"
        else
            echo -e "${YELLOW}‚ö†${NC} –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –Ω–µ –Ω–∞–π–¥–µ–Ω (–≤–æ–∑–º–æ–∂–Ω–æ, Ansible –µ—â–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω)"
        fi
    else
        echo -e "${YELLOW}‚ö†${NC} SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"
    fi
else
    echo -e "${YELLOW}‚ö†${NC} Ubuntu Server –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–≤–æ–∑–º–æ–∂–Ω–æ, –µ—â–µ –Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç)"
fi

# 4. –ò—Ç–æ–≥–∏
echo ""
echo "=== –ò—Ç–æ–≥–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ==="
echo -e "${GREEN}–ü—Ä–æ–π–¥–µ–Ω–æ:${NC} $PASSED"
echo -e "${RED}–ü—Ä–æ–≤–∞–ª–µ–Ω–æ:${NC} $FAILED"

if [ $FAILED -eq 0 ]; then
    echo -e "${GREEN}–í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!${NC}"
    exit 0
else
    echo -e "${RED}–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–≤–∞–ª–µ–Ω—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.${NC}"
    exit 1
fi
```

## –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: Terraform —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
cd infrastructure/terraform

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
terraform init
# –û–∂–∏–¥–∞–µ—Ç—Å—è: —É—Å–ø–µ—à–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

# –í–∞–ª–∏–¥–∞—Ü–∏—è
terraform validate
# –û–∂–∏–¥–∞–µ—Ç—Å—è: "Success! The configuration is valid."

# –ü–ª–∞–Ω
terraform plan
# –û–∂–∏–¥–∞–µ—Ç—Å—è: –ø–ª–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è 1 VM –∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
terraform apply
# –û–∂–∏–¥–∞–µ—Ç—Å—è: —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ VM

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–≤–æ–¥–∞
terraform output
# –û–∂–∏–¥–∞–µ—Ç—Å—è: IP –∞–¥—Ä–µ—Å Ubuntu Server
```

### –¢–µ—Å—Ç 2: Ansible –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
cd infrastructure/ansible

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
ansible-playbook --syntax-check -i inventory.yml playbook.yml
# –û–∂–∏–¥–∞–µ—Ç—Å—è: –±–µ–∑ –æ—à–∏–±–æ–∫

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
ansible ubuntu-server -i inventory.yml -m ping
# –û–∂–∏–¥–∞–µ—Ç—Å—è: "pong"

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ playbook
ansible-playbook -i inventory.yml playbook.yml --limit ubuntu-server
# –û–∂–∏–¥–∞–µ—Ç—Å—è: –≤—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
```

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Ubuntu Server
ssh ubuntu@192.168.100.10

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
# (—Å–º. VALIDATION.md –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫)
```

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- [ ] Terraform –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞
- [ ] Ansible playbook —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
- [ ] Ubuntu Server —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Ansible –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Ubuntu Server

### –ü–æ–ª–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- [ ] –í—Å–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] –í—Å–µ 12 –∫–∞—Ç–µ–≥–æ—Ä–∏–π —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω
- [ ] Windows –º–∞—à–∏–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] Ansible –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Windows –º–∞—à–∏–Ω—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–∑–¥–∞–π—Ç–µ –æ—Ç—á–µ—Ç:

```markdown
# –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

**–î–∞—Ç–∞:** [–¥–∞—Ç–∞]
**–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫:** [–∏–º—è]

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### Terraform
- [ ] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: –£—Å–ø–µ—à–Ω–æ / –û—à–∏–±–∫–∞
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è: –£—Å–ø–µ—à–Ω–æ / –û—à–∏–±–∫–∞
- [ ] –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ: –£—Å–ø–µ—à–Ω–æ / –û—à–∏–±–∫–∞

### Ansible
- [ ] –°–∏–Ω—Ç–∞–∫—Å–∏—Å: –£—Å–ø–µ—à–Ω–æ / –û—à–∏–±–∫–∞
- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: –£—Å–ø–µ—à–Ω–æ / –û—à–∏–±–∫–∞
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ playbook: –£—Å–ø–µ—à–Ω–æ / –û—à–∏–±–∫–∞

### –£—è–∑–≤–∏–º–æ—Å—Ç–∏
- [ ] –ö–∞—Ç–µ–≥–æ—Ä–∏—è 1: –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ / –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- [ ] –ö–∞—Ç–µ–≥–æ—Ä–∏—è 2: –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ / –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ... (–¥–ª—è –≤—Å–µ—Ö 12 –∫–∞—Ç–µ–≥–æ—Ä–∏–π)

## –ü—Ä–æ–±–ª–µ–º—ã

[–û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º]

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

[–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é]
```

