# Шаблон отчета о выполненной работе

## Титульный лист

**Федеральное государственное бюджетное образовательное учреждение высшего образования**

**Кафедра:** _________________________________

**Дисциплина:** Защита операционных систем

**Практическая работа:** Обнаружение и исправление уязвимостей ОС

---

**Выполнил(а):**  
ФИО: _________________________________  
Группа: _________________________________  
Дата выполнения: _________________________________

**Проверил(а):**  
ФИО преподавателя: _________________________________  
Оценка: _______________  
Дата проверки: _________________________________

---

## Содержание

1. [Введение](#введение)
2. [Описание инфраструктуры](#описание-инфраструктуры)
3. [Обнаруженные уязвимости](#обнаруженные-уязвимости)
4. [Исправление уязвимостей](#исправление-уязвимостей)
5. [Результаты проверки](#результаты-проверки)
6. [Заключение](#заключение)
7. [Список использованных источников](#список-использованных-источников)

---

## 1. Введение

### 1.1 Цель работы

Целью данной практической работы является:

- Изучение типичных уязвимостей операционных систем
- Приобретение навыков обнаружения уязвимостей в конфигурации ОС
- Освоение методов исправления найденных уязвимостей
- Применение лучших практик безопасности

### 1.2 Задачи работы

В ходе выполнения работы необходимо:

1. Подключиться к учебной инфраструктуре
2. Обнаружить уязвимости на всех машинах
3. Исправить найденные уязвимости
4. Проверить корректность исправлений
5. Подготовить отчет о выполненной работе

---

## 2. Описание инфраструктуры

### 2.1 Состав инфраструктуры

Учебная инфраструктура включает три виртуальные машины:

1. **Ubuntu Server 22.04 LTS**
   - IP адрес: `192.168.100.10`
   - Учетные данные: `ubuntu` / `ubuntu123`
   - Назначение: Серверная операционная система Linux

2. **Windows Server 2016**
   - IP адрес: `192.168.100.20`
   - Учетные данные: `Administrator` / `Admin123!`
   - Назначение: Серверная операционная система Windows

3. **Windows 10 Pro**
   - IP адрес: `192.168.100.30`
   - Учетные данные: `user` / `password123`
   - Назначение: Клиентская операционная система Windows

### 2.2 Сетевая топология

Все машины находятся в одной сети `192.168.100.0/24` и имеют возможность взаимодействовать друг с другом.

```
┌─────────────────────────────────────────┐
│        192.168.100.0/24                 │
│                                          │
│  ┌──────────────┐  ┌──────────────┐   │
│  │ Ubuntu Server│  │ Windows Server│   │
│  │  .10          │  │  .20          │   │
│  └──────────────┘  └──────────────┘   │
│                                          │
│  ┌──────────────┐                       │
│  │ Windows 10   │                       │
│  │  .30          │                       │
│  └──────────────┘                       │
└─────────────────────────────────────────┘
```

---

## 3. Обнаруженные уязвимости

### 3.1 Ubuntu Server

#### 3.1.1 Категория 1: Ошибки в управлении аккаунтами и аутентификацией

**Описание проблемы:**

На сервере обнаружены пользователи со слабыми паролями и неправильными настройками аутентификации.

**Методы обнаружения:**

1. Проверка файла `/etc/passwd`:
   ```bash
   cat /etc/passwd
   ```
   **Вывод:**
   ```
   [Вставьте вывод команды]
   ```

2. Проверка настроек PAM:
   ```bash
   cat /etc/pam.d/common-password
   ```
   **Вывод:**
   ```
   [Вставьте вывод команды]
   ```

3. Проверка настроек sudo:
   ```bash
   sudo cat /etc/sudoers
   ```
   **Вывод:**
   ```
   [Вставьте вывод команды]
   ```

**Найденные уязвимости:**

- [ ] Пользователь `admin` с паролем `admin123`
- [ ] Пользователь `user1` с паролем `password123`
- [ ] Пользователь `root` с паролем `root123`
- [ ] `minlen = 1` в PAM (нет ограничений на длину пароля)
- [ ] Правила sudo с `NOPASSWD` для всех пользователей
- [ ] Пароли никогда не истекают

**Скриншоты:**

[Вставьте скриншоты]

---

#### 3.1.2 Категория 2: Уязвимости при конфигурации SSH

**Описание проблемы:**

SSH настроен небезопасно, разрешен вход root и парольная аутентификация.

**Методы обнаружения:**

1. Проверка конфигурации SSH:
   ```bash
   sudo cat /etc/ssh/sshd_config | grep -E "PermitRootLogin|PasswordAuthentication|MaxAuthTries"
   ```
   **Вывод:**
   ```
   [Вставьте вывод команды]
   ```

2. Проверка статуса fail2ban:
   ```bash
   systemctl status fail2ban
   ```
   **Вывод:**
   ```
   [Вставьте вывод команды]
   ```

**Найденные уязвимости:**

- [ ] `PermitRootLogin yes` (разрешен вход root)
- [ ] `PasswordAuthentication yes` (парольная аутентификация)
- [ ] `MaxAuthTries 1000` (неограниченные попытки)
- [ ] fail2ban не установлен или не запущен

**Скриншоты:**

[Вставьте скриншоты]

---

#### 3.1.3 Категория 3: Ошибки конфигурации сети и firewall

**Описание проблемы:**

UFW отключен, открыты небезопасные порты.

**Методы обнаружения:**

1. Проверка статуса UFW:
   ```bash
   sudo ufw status
   ```
   **Вывод:**
   ```
   [Вставьте вывод команды]
   ```

2. Проверка открытых портов:
   ```bash
   sudo netstat -tulpn
   ```
   **Вывод:**
   ```
   [Вставьте вывод команды]
   ```

**Найденные уязвимости:**

- [ ] UFW отключен
- [ ] Открыт порт 23 (Telnet)
- [ ] Открыт порт 21 (FTP)
- [ ] Открыт порт 513 (Rlogin)

**Скриншоты:**

[Вставьте скриншоты]

---

#### 3.1.4 Категория 6: Ошибки с правами доступа и файлами

**Описание проблемы:**

Обнаружены неправильные права доступа на системные директории и файлы.

**Методы обнаружения:**

1. Проверка прав на системные директории:
   ```bash
   ls -ld /etc /var /home
   ```
   **Вывод:**
   ```
   [Вставьте вывод команды]
   ```

2. Проверка прав на `/etc/shadow`:
   ```bash
   ls -l /etc/shadow
   ```
   **Вывод:**
   ```
   [Вставьте вывод команды]
   ```

3. Поиск директорий с правами 777:
   ```bash
   find / -type d -perm 777 2>/dev/null
   ```
   **Вывод:**
   ```
   [Вставьте вывод команды]
   ```

**Найденные уязвимости:**

- [ ] `/etc` с правами 777
- [ ] `/var` с правами 777
- [ ] `/etc/shadow` с неправильными правами (не 640)

**Скриншоты:**

[Вставьте скриншоты]

---

### 3.2 Windows Server 2016

#### 3.2.1 Категория 1: Уязвимости аутентификации

**Описание проблемы:**

Обнаружены слабые пароли и неправильные настройки политики паролей.

**Методы обнаружения:**

1. Проверка политики паролей через Local Security Policy:
   - `Win + R` → `secpol.msc`
   - Account Policies → Password Policy

2. Проверка учетных записей:
   - Computer Management → Local Users and Groups → Users

**Найденные уязвимости:**

- [ ] Пользователь `admin` с паролем `admin123`
- [ ] Минимальная длина пароля: 1 символ
- [ ] Политика сложных паролей отключена
- [ ] Пароли никогда не истекают
- [ ] Нет истории паролей

**Скриншоты:**

[Вставьте скриншоты]

---

#### 3.2.2 Категория 4: Уязвимости конфигурации сети

**Описание проблемы:**

Обнаружены устаревшие и небезопасные сетевые протоколы.

**Методы обнаружения:**

1. Проверка статуса SMBv1:
   ```powershell
   Get-WindowsOptionalFeature -Online -FeatureName SMB1Protocol
   ```

2. Проверка настроек NTLM:
   ```powershell
   Get-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Control\Lsa" -Name "LmCompatibilityLevel"
   ```

**Найденные уязвимости:**

- [ ] SMBv1 включен
- [ ] NTLMv1 разрешен
- [ ] Широкие правила брандмауэра

**Скриншоты:**

[Вставьте скриншоты]

---

### 3.3 Windows 10 Pro

**Описание проблемы:**

Обнаружены уязвимости клиентской системы.

**Найденные уязвимости:**

- [ ] Слабые пароли
- [ ] UAC отключен
- [ ] Обновления отключены
- [ ] Windows Defender отключен
- [ ] SMBv1 включен
- [ ] Брандмауэр отключен
- [ ] RDP включен

**Скриншоты:**

[Вставьте скриншоты]

---

### 3.4 Статистика обнаруженных уязвимостей

| Машина | Категорий найдено | Всего уязвимостей |
|--------|-------------------|-------------------|
| Ubuntu Server | ___ | ___ |
| Windows Server 2016 | ___ | ___ |
| Windows 10 Pro | ___ | ___ |
| **ИТОГО** | **___** | **___** |

---

## 4. Исправление уязвимостей

### 4.1 Ubuntu Server

#### 4.1.1 Исправление аутентификации

**Выполненные действия:**

1. Настройка PAM для минимальной длины пароля 12 символов:
   ```bash
   sudo nano /etc/pam.d/common-password
   # Изменил: password requisite pam_pwquality.so minlen=12
   ```

2. Отключение root login:
   ```bash
   sudo nano /etc/ssh/sshd_config
   # Установил: PermitRootLogin no
   sudo systemctl restart sshd
   ```

3. Настройка sudo прав:
   ```bash
   sudo visudo
   # Удалил правила с NOPASSWD
   ```

4. Установка и настройка fail2ban:
   ```bash
   sudo apt update
   sudo apt install -y fail2ban
   sudo systemctl enable fail2ban
   sudo systemctl start fail2ban
   ```

**Проверка исправлений:**

```bash
# Проверка PAM
grep minlen /etc/pam.d/common-password

# Проверка SSH
sudo sshd -T | grep permitrootlogin

# Проверка fail2ban
sudo systemctl status fail2ban
```

**Результат:** [Опишите результат проверки]

**Скриншоты:**

[Вставьте скриншоты]

---

#### 4.1.2 Исправление SSH

**Выполненные действия:**

1. Отключение парольной аутентификации:
   ```bash
   sudo nano /etc/ssh/sshd_config
   # Установил: PasswordAuthentication no
   # Установил: MaxAuthTries 3
   ```

2. Отключение слабых алгоритмов:
   ```bash
   # Добавил в /etc/ssh/sshd_config:
   KexAlgorithms curve25519-sha256@libssh.org,diffie-hellman-group-exchange-sha256
   Ciphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com
   ```

3. Перезапуск SSH:
   ```bash
   sudo systemctl restart sshd
   ```

**Проверка исправлений:**

```bash
sudo sshd -T | grep -E "passwordauthentication|permitrootlogin|maxauthtries"
```

**Результат:** [Опишите результат проверки]

---

#### 4.1.3 Исправление firewall

**Выполненные действия:**

1. Включение UFW:
   ```bash
   sudo ufw enable
   ```

2. Настройка правил:
   ```bash
   sudo ufw allow 22/tcp  # SSH
   sudo ufw allow 80/tcp  # HTTP (если нужен)
   sudo ufw allow 443/tcp # HTTPS (если нужен)
   ```

3. Отключение небезопасных служб:
   ```bash
   sudo systemctl stop telnet
   sudo systemctl disable telnet
   sudo systemctl stop ftp
   sudo systemctl disable ftp
   ```

**Проверка исправлений:**

```bash
sudo ufw status verbose
sudo netstat -tulpn | grep -E "23|21|513"
```

**Результат:** [Опишите результат проверки]

---

#### 4.1.4 Исправление прав доступа

**Выполненные действия:**

1. Исправление прав на системные директории:
   ```bash
   sudo chmod 755 /etc
   sudo chmod 755 /var
   sudo chmod 755 /home
   ```

2. Исправление прав на `/etc/shadow`:
   ```bash
   sudo chmod 640 /etc/shadow
   sudo chown root:shadow /etc/shadow
   ```

3. Исправление директорий с правами 777:
   ```bash
   find / -type d -perm 777 2>/dev/null | while read dir; do
     sudo chmod 755 "$dir"
   done
   ```

**Проверка исправлений:**

```bash
ls -ld /etc /var /home
ls -l /etc/shadow
find / -type d -perm 777 2>/dev/null
```

**Результат:** [Опишите результат проверки]

---

### 4.2 Windows Server 2016

#### 4.2.1 Исправление политики паролей

**Выполненные действия:**

1. Настройка политики паролей через Local Security Policy:
   - Minimum password length: 12
   - Password must meet complexity requirements: Enabled
   - Enforce password history: 24
   - Maximum password age: 90 days
   - Minimum password age: 1 day

2. Изменение паролей пользователей:
   ```powershell
   net user admin "NewComplexPassword123!"
   ```

**Проверка исправлений:**

```powershell
Get-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Services\Netlogon\Parameters" | Select-Object MinimumPasswordLength
```

**Результат:** [Опишите результат проверки]

---

#### 4.2.2 Отключение устаревших протоколов

**Выполненные действия:**

1. Отключение SMBv1:
   ```powershell
   Disable-WindowsOptionalFeature -Online -FeatureName SMB1Protocol -Remove
   ```

2. Отключение NTLMv1:
   ```powershell
   Set-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Control\Lsa" -Name "LmCompatibilityLevel" -Value 5
   ```

3. Настройка брандмауэра:
   ```powershell
   New-NetFirewallRule -DisplayName "Allow SMB" -Direction Inbound -Protocol TCP -LocalPort 445 -Action Allow
   ```

**Проверка исправлений:**

```powershell
Get-WindowsOptionalFeature -Online -FeatureName SMB1Protocol
Get-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Control\Lsa" -Name "LmCompatibilityLevel"
```

**Результат:** [Опишите результат проверки]

---

### 4.3 Windows 10 Pro

**Выполненные действия:**

1. Включение UAC:
   ```powershell
   Set-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System" -Name "EnableLUA" -Value 1
   ```

2. Включение Windows Defender:
   ```powershell
   Set-MpPreference -DisableRealtimeMonitoring $false
   Start-MpScan
   ```

3. Включение брандмауэра:
   ```powershell
   Set-NetFirewallProfile -Profile Domain,Public,Private -Enabled True
   ```

**Проверка исправлений:**

[Опишите проверку]

**Результат:** [Опишите результат проверки]

---

### 4.4 Статистика исправленных уязвимостей

| Машина | Исправлено уязвимостей | Процент |
|--------|------------------------|---------|
| Ubuntu Server | ___ | ___% |
| Windows Server 2016 | ___ | ___% |
| Windows 10 Pro | ___ | ___% |
| **ИТОГО** | **___** | **___**% |

---

## 5. Результаты проверки

### 5.1 Автоматизированная проверка

**Использованный скрипт:** `infrastructure/scripts/verify-fixes.sh`

**Результаты:**

```
[Вставьте вывод скрипта]
```

**Итог:** ___ / ___ проверок пройдено

### 5.2 Ручная проверка

**Использованный чеклист:** `docs/assessment/CHECKLIST.md`

**Результаты:**

- [ ] Все проверки Ubuntu Server пройдены
- [ ] Все проверки Windows Server 2016 пройдены
- [ ] Все проверки Windows 10 Pro пройдены

---

## 6. Заключение

### 6.1 Выводы

В ходе выполнения практической работы:

1. Были обнаружены и исправлены уязвимости на всех трех машинах учебной инфраструктуры.

2. Наиболее критичными оказались:
   - [Перечислите наиболее критичные уязвимости]

3. Наиболее сложными для исправления были:
   - [Перечислите сложные исправления]

4. Применены следующие лучшие практики безопасности:
   - [Перечислите примененные практики]

### 6.2 Рекомендации

Для предотвращения подобных уязвимостей в реальных системах рекомендуется:

1. [Ваша рекомендация 1]
2. [Ваша рекомендация 2]
3. [Ваша рекомендация 3]

### 6.3 Приобретенные навыки

В ходе выполнения работы были приобретены следующие навыки:

- [Навык 1]
- [Навык 2]
- [Навык 3]

---

## 7. Список использованных источников

1. Методические указания для студентов: `docs/learning/STUDENT_GUIDE.md`
2. Описание уязвимостей: `docs/overview/machine-scenarios.md`
3. Чеклист проверки: `docs/assessment/CHECKLIST.md`
4. [Дополнительные источники]

---

**Приложения:**

- Приложение А: Скриншоты обнаружения уязвимостей
- Приложение Б: Скриншоты исправления уязвимостей
- Приложение В: Выводы команд

---

**Дата завершения работы:** _______________

**Подпись студента:** _______________

