# Сценарий: Небольшая офисная организация

## Обзор организации

**Название**: ООО "ТехноСервис"  
**Тип**: Небольшая IT-компания, занимающаяся разработкой программного обеспечения  
**Количество сотрудников**: 25-30 человек  
**Сфера деятельности**: Разработка веб-приложений, техническая поддержка клиентов

## Организационная структура

### Департаменты и роли

#### 1. Руководство
- **Директор** (1 чел.)
  - Учетная запись: `director@techservice.local`
  - Привилегии: Полный доступ ко всем системам
  - Типичные ошибки: Использование простых паролей, доступ с личных устройств

#### 2. IT-отдел (5 человек)
- **Системный администратор** (1 чел.)
  - Учетная запись: `admin@techservice.local`
  - Привилегии: Административные права на всех серверах
  - Типичные ошибки: Открытые порты, слабые пароли, необновленное ПО
  
- **Веб-разработчики** (3 чел.)
  - Учетные записи: `dev1@techservice.local`, `dev2@techservice.local`, `dev3@techservice.local`
  - Привилегии: Доступ к серверам разработки и тестирования
  - Типичные ошибки: Хранение учетных данных в открытом виде, небезопасная конфигурация приложений

- **DevOps-инженер** (1 чел.)
  - Учетная запись: `devops@techservice.local`
  - Привилегии: Доступ к инфраструктуре и CI/CD системам
  - Типичные ошибки: Небезопасные настройки контейнеров, открытые репозитории

#### 3. Отдел разработки (12 человек)
- **Руководитель отдела** (1 чел.)
  - Учетная запись: `lead@techservice.local`
  - Привилегии: Управление проектами, доступ к production-окружению
  
- **Старшие разработчики** (3 чел.)
  - Учетные записи: `senior1@techservice.local`, `senior2@techservice.local`, `senior3@techservice.local`
  - Привилегии: Доступ к репозиториям кода, серверам разработки
  
- **Разработчики** (8 чел.)
  - Учетные записи: `dev[1-8]@techservice.local`
  - Привилегии: Доступ к репозиториям кода, ограниченный доступ к серверам

#### 4. Отдел тестирования (4 человека)
- **QA Lead** (1 чел.)
  - Учетная запись: `qa-lead@techservice.local`
  - Привилегии: Доступ к тестовым окружениям и базам данных
  
- **QA-инженеры** (3 чел.)
  - Учетные записи: `qa1@techservice.local`, `qa2@techservice.local`, `qa3@techservice.local`
  - Привилегии: Доступ к тестовым окружениям

#### 5. Отдел продаж и маркетинга (5 человек)
- **Менеджеры по продажам** (3 чел.)
  - Учетные записи: `sales1@techservice.local`, `sales2@techservice.local`, `sales3@techservice.local`
  - Привилегии: Доступ к CRM системе, ограниченный доступ к корпоративным ресурсам
  
- **Маркетолог** (1 чел.)
  - Учетная запись: `marketing@techservice.local`
  - Привилегии: Доступ к веб-сайту и системам аналитики
  
- **Менеджер по работе с клиентами** (1 чел.)
  - Учетная запись: `support@techservice.local`
  - Привилегии: Доступ к системе поддержки клиентов

#### 6. Бухгалтерия (2 человека)
- **Главный бухгалтер** (1 чел.)
  - Учетная запись: `accountant@techservice.local`
  - Привилегии: Доступ к финансовым системам, базам данных клиентов
  
- **Бухгалтер** (1 чел.)
  - Учетная запись: `accountant2@techservice.local`
  - Привилегии: Ограниченный доступ к финансовым системам

#### 7. HR-отдел (1 человек)
- **HR-менеджер** (1 чел.)
  - Учетная запись: `hr@techservice.local`
  - Привилегии: Доступ к системам управления персоналом

## Структура сети

### Сетевая топология

```
                    Интернет
                        |
                   [Firewall]
                        |
                   [Router]
                        |
        +---------------+---------------+
        |               |               |
    [DMZ]          [Internal]      [Development]
        |               |               |
    +---+---+       +---+---+       +---+---+
    |       |       |       |       |       |
  Web    Mail    Work    DB    Test    Dev
        |       |       |       |       |
    File   Domain    Backup  Monitoring
```

### Сетевые сегменты

#### 1. DMZ (Demilitarized Zone) - 192.168.10.0/24
**Назначение**: Публично доступные сервисы  
**Изоляция**: Частично изолирован от внутренней сети

**Устройства**:
- **Web-сервер** (192.168.10.10)
  - Роль: Основной веб-сайт компании
  - Сервисы: Apache/Nginx, веб-приложение
  - Уязвимости: Устаревшая версия веб-сервера, открытые порты
  
- **Mail-сервер** (192.168.10.20)
  - Роль: Корпоративная почта
  - Сервисы: Postfix/Dovecot
  - Уязвимости: Небезопасная конфигурация, слабые пароли

- **DNS-сервер** (192.168.10.30)
  - Роль: DNS для внутренней сети
  - Сервисы: BIND9
  - Уязвимости: Открытый рекурсивный DNS

#### 2. Внутренняя сеть (Internal Network) - 192.168.20.0/24
**Назначение**: Рабочие станции сотрудников и внутренние сервисы  
**Изоляция**: Изолирован от DMZ и интернета

**Устройства**:
- **Файловый сервер** (192.168.20.10)
  - Роль: Общие файлы и документы
  - Сервисы: Samba/CIFS, NFS
  - Уязвимости: Открытые шары с правами записи для всех, слабые пароли
  
- **Domain-контроллер** (192.168.20.20)
  - Роль: Централизованная аутентификация
  - Сервисы: Active Directory / LDAP
  - Уязвимости: Устаревшие протоколы (SMBv1), слабые пароли администраторов
  
- **База данных** (192.168.20.30)
  - Роль: Основная база данных приложений
  - Сервисы: MySQL/PostgreSQL
  - Уязвимости: Удаленный доступ без шифрования, слабые пароли root
  
- **Резервное копирование** (192.168.20.40)
  - Роль: Система резервного копирования
  - Сервисы: Rsync, BackupPC
  - Уязвимости: Нешифрованные бэкапы, доступ по SSH без ключей

- **Мониторинг** (192.168.20.50)
  - Роль: Мониторинг инфраструктуры
  - Сервисы: Prometheus, Grafana, Nagios
  - Уязвимости: Открытый веб-интерфейс без аутентификации, слабые пароли

- **Рабочие станции** (192.168.20.100-192.168.20.130)
  - Количество: 30 станций
  - ОС: Windows 10/11, Ubuntu Desktop
  - Уязвимости: Необновленное ПО, отключенные антивирусы, открытые порты

#### 3. Сеть разработки (Development Network) - 192.168.30.0/24
**Назначение**: Окружения разработки и тестирования  
**Изоляция**: Изолирован от production-окружений

**Устройства**:
- **Сервер разработки** (192.168.30.10)
  - Роль: Окружение разработки
  - Сервисы: GitLab, Docker, тестовые приложения
  - Уязвимости: Уязвимые версии Docker, открытые Git репозитории
  
- **Сервер тестирования** (192.168.30.20)
  - Роль: Тестовое окружение
  - Сервисы: Тестовые приложения, базы данных
  - Уязвимости: Тестовые данные в открытом виде, слабые пароли
  
- **CI/CD сервер** (192.168.30.30)
  - Роль: Автоматизация сборки и развертывания
  - Сервисы: Jenkins, GitLab CI
  - Уязвимости: Открытый интерфейс, небезопасные credentials

#### 4. Управляющая сеть (Management Network) - 192.168.40.0/24
**Назначение**: Управление инфраструктурой  
**Изоляция**: Полностью изолирована

**Устройства**:
- **Jump-сервер** (192.168.40.10)
  - Роль: Точка входа для администраторов
  - Сервисы: SSH, VPN
  - Уязвимости: Доступ по паролю, отсутствие 2FA

## Типичные уязвимости и ошибки

### Уровень 1: Базовые ошибки конфигурации
1. **Слабые пароли**
   - Пароли по умолчанию на устройствах
   - Простые пароли пользователей (password, 123456, qwerty)
   - Отсутствие политики сложности паролей

2. **Открытые порты**
   - Неиспользуемые открытые порты
   - Порты управления, доступные из интернета
   - Отсутствие правил брандмауэра

3. **Необновленное ПО**
   - Устаревшие версии операционных систем
   - Непатченные уязвимости (например, Log4Shell)
   - Отключенные автоматические обновления

### Уровень 2: Ошибки конфигурации безопасности
4. **Небезопасные протоколы**
   - Использование FTP вместо SFTP
   - Отключенное шифрование баз данных
   - Использование HTTP вместо HTTPS

5. **Избыточные привилегии**
   - Пользователи с правами администратора без необходимости
   - Открытые файловые шары с правами записи для всех
   - Неограниченный доступ к базам данных

6. **Отсутствие мониторинга**
   - Не настроено логирование критичных событий
   - Отсутствие алертов на подозрительную активность
   - Нет системы обнаружения вторжений

### Уровень 3: Архитектурные проблемы
7. **Отсутствие сегментации сети**
   - Все серверы в одной сети
   - Отсутствие DMZ для публичных сервисов
   - Нет изоляции между окружениями

8. **Утечки данных**
   - Учетные данные в открытом виде в репозиториях
   - Резервные копии без шифрования
   - Логи содержат чувствительную информацию

9. **Отсутствие резервного копирования**
   - Не настроено автоматическое резервное копирование
   - Бэкапы хранятся на том же сервере
   - Нет плана восстановления после сбоев

## Сценарии для обучения

### Сценарий 1: Компрометация веб-сервера через уязвимость Log4Shell
**Цель**: Обнаружение и эксплуатация уязвимости в веб-приложении  
**Уровень**: Средний  
**Время**: 2-3 часа

### Сценарий 2: Неправильная конфигурация файлового сервера
**Цель**: Обнаружение и эксплуатация уязвимостей конфигурации  
**Уровень**: Начальный  
**Время**: 1-2 часа

### Сценарий 3: Компрометация базы данных через слабые пароли
**Цель**: Обнаружение и эксплуатация слабых паролей  
**Уровень**: Начальный  
**Время**: 1-2 часа

### Сценарий 4: Инсайдерская угроза - злоупотребление привилегиями
**Цель**: Обнаружение аномальной активности пользователя  
**Уровень**: Продвинутый  
**Время**: 3-4 часа

### Сценарий 5: Распространение через сеть - от рабочей станции к серверам
**Цель**: Понимание цепочки атаки и латерального перемещения  
**Уровень**: Продвинутый  
**Время**: 3-4 часа

